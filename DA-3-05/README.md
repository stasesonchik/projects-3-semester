# DA-3-05: Анализ временных рядов с использованием скользящих статистик

Этот проект демонстрирует создание синтетического временного ряда, вычисление скользящих статистик и визуализацию результатов. Он интегрирует задачи DA-2-12 (скользящие средние и стандартные отклонения) и DA-2-28 (подсчет значений выше локального среднего).

---

## Содержание

- [Описание функций](#описание-функций)
- [Установка](#установка)
- [Использование](#использование)
- [Примеры](#примеры)
- [Визуализация](#визуализация)
- [Аргументы командной строки](#аргументы-командной-строки)

---

## Описание функций

### 1. `create_synthetic_series`

Генерирует синтетический временной ряд.

**Аргументы:**
- `n_points` (int): количество точек (>0)
- `start_date` (str, optional): дата начала ряда, формат `YYYY-MM-DD`, по умолчанию `'2024-01-01'`

**Возвращает:**
- `pd.DataFrame` с колонками:
  - `date` — даты
  - `value` — случайные значения

---

### 2. `calculation_moving_average`

Вычисляет скользящее среднее для указанных окон.

**Аргументы:**
- `df` (pd.DataFrame) — исходный DataFrame
- `windows` (list) — список размеров окон
- `value_col` (str) — колонка с числовыми значениями (по умолчанию `'value'`)
- `new_col` (str) — базовое имя для новых колонок (по умолчанию `'mov_avg'`)

**Возвращает:**
- DataFrame с новыми колонками `mov_avg_<окно>`

---

### 3. `calculation_moving_std`

Вычисляет скользящее стандартное отклонение для указанных окон.

**Аргументы:**
- `df` (pd.DataFrame)
- `windows` (list)
- `value_col` (str, default `'value'`)
- `new_col` (str, default `'mov_std'`)

**Возвращает:**
- DataFrame с новыми колонками `mov_std_<окно>`

---

### 4. `calculation_count_over_threshold`

Вычисляет количество значений, превышающих заданный порог, для каждого окна.

**Аргументы:**
- `df` (pd.DataFrame)
- `windows` (list)
- `value_col` (str, default `'value'`)
- `new_col` (str, default `'count_thr'`)
- `threshold` (float, default `50`) — порог

**Возвращает:**
- DataFrame с колонками `count_thr_<окно>`

---

### 5. `calculation_count_above_mean`

Подсчитывает количество значений в каждом окне, превышающих среднее по окну.

**Аргументы:**
- `df` (pd.DataFrame)
- `windows` (list)
- `value_col` (str, default `'value'`)
- `new_col` (str, default `'count_above_mean'`)

**Возвращает:**
- DataFrame с колонками `count_above_mean_<окно>`

---

### 6. `build_graph`

Строит графики по временным рядам и скользящим статистикам.

**Аргументы:**
- `df` (pd.DataFrame)
- `windows` (list) — размеры окон
- `output_dir` (str, default `'output'`) — папка для сохранения графиков
- `format_file` (str, default `'png'`) — формат графиков (`png`, `pdf`, `jpg`)

**Графики:**
1. Исходный ряд + скользящие средние
2. Количество значений > порога
3. Количество значений > локального среднего

Графики сохраняются в `output_dir`.

---

## Установка

1. Клонируйте репозиторий:
git clone <your-repo-url>
cd <repo-folder>

## 2 Установите зависимости:
pip install pandas numpy matplotlib

## 3 Использование
python main.py -n 60 -w 3 5 7 -t 50 -o output --format png
